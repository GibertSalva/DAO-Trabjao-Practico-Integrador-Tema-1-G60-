# ========================================
# GU√çA DE ACTUALIZACI√ìN DEL SISTEMA
# ========================================

## PASO 1: Crear y Aplicar Migraciones
# Estas migraciones incluyen las nuevas validaciones y el campo de usuario en Cliente

python manage.py makemigrations
python manage.py migrate

## PASO 2: Crear un Superusuario (si a√∫n no lo hiciste)
python manage.py createsuperuser

## PASO 3: Iniciar el Servidor
python manage.py runserver

## PASO 4: Acceder a la Aplicaci√≥n
# http://127.0.0.1:8000/

# ========================================
# NUEVAS FUNCIONALIDADES IMPLEMENTADAS
# ========================================

## üîê SISTEMA DE AUTENTICACI√ìN:
# - Registro de usuarios (/registro/)
# - Login (/login/)
# - Perfil de usuario (/perfil/)
# - Editar perfil (/perfil/editar/)
# - Mis reservas (/mis-reservas/)
# - Logout (/logout/)

## ‚úÖ VALIDACIONES AVANZADAS:
# - DNI argentino (7-8 d√≠gitos)
# - Tel√©fono v√°lido
# - Nombres sin n√∫meros
# - Horario de apertura: 8:00 AM
# - Horario de cierre: 11:00 PM
# - Duraci√≥n m√≠nima: 1 hora
# - Duraci√≥n m√°xima: 4 horas
# - M√°ximo 3 reservas por d√≠a por cliente
# - Verificaci√≥n de disponibilidad de cancha
# - Validaci√≥n de precios positivos
# - Validaci√≥n de fechas de torneos

## üë• TIPOS DE USUARIOS:
# 1. Administradores (is_staff=True):
#    - Ven TODOS los clientes, canchas y reservas
#    - Pueden crear, editar y eliminar cualquier registro
#    - Acceso al panel de administraci√≥n /admin/
#
# 2. Clientes (usuarios normales):
#    - Solo ven SUS propias reservas
#    - Pueden ver las canchas disponibles
#    - Pueden crear nuevas reservas
#    - Pueden editar su perfil

## üéØ NAVEGACI√ìN:
# - La barra de navegaci√≥n se adapta seg√∫n el tipo de usuario
# - Los usuarios no autenticados solo ven: Inicio, Canchas, Login, Registro
# - Los clientes autenticados ven: Inicio, Canchas, Mis Reservas, Nueva Reserva, Perfil
# - Los administradores ven: Inicio, Clientes, Canchas, Todas las Reservas, Admin, Perfil

# ========================================
# VALIDACIONES DE NEGOCIO
# ========================================

## En el modelo Cliente:
# - DNI √∫nico de 7-8 d√≠gitos
# - Email √∫nico
# - Tel√©fono v√°lido
# - Nombres y apellidos sin n√∫meros
# - Cliente activo/inactivo

## En el modelo Cancha:
# - Precio por hora mayor a 0
# - Capacidad entre 2 y 50 personas
# - Cancha activa/inactiva

## En el modelo Reserva:
# - No se puede reservar en el pasado
# - Fecha fin posterior a fecha inicio
# - Horario dentro de apertura/cierre
# - Duraci√≥n entre 1 y 4 horas
# - Reserva en el mismo d√≠a (no cruza medianoche)
# - Verificaci√≥n de disponibilidad
# - M√°ximo 3 reservas por cliente por d√≠a
# - Cliente y cancha deben estar activos

## En el modelo Pago:
# - Monto mayor a 0
# - Si est√° pagado, requiere fecha y m√©todo de pago

# ========================================
# CAMPOS NUEVOS AGREGADOS
# ========================================

# Cliente:
# - usuario (OneToOne con User) - para login
# - fecha_registro
# - activo

# Cancha:
# - activa
# - capacidad_personas

# Servicio:
# - activo
# - descripcion

# Torneo:
# - activo

# Reserva:
# - fecha_creacion
# - observaciones

# Pago:
# - comprobante
# - observaciones
# - TARJETA_DEBITO y TARJETA_CREDITO como nuevos m√©todos de pago

# ========================================
# C√ìMO USAR EL SISTEMA
# ========================================

## Para CREAR UN CLIENTE con Usuario:
# 1. Ir a /registro/
# 2. Completar el formulario con datos de usuario y cliente
# 3. El sistema autom√°ticamente:
#    - Crea el User de Django
#    - Crea el Cliente asociado
#    - Inicia sesi√≥n autom√°ticamente

## Para PROBAR con datos existentes:
# Si ya tienes clientes creados sin usuario, puedes:
# 1. Ir al /admin/
# 2. Editar un Cliente
# 3. Asignarle un User existente o crear uno nuevo

## Para CREAR RESERVAS como Cliente:
# 1. Iniciar sesi√≥n con tu cuenta
# 2. Ir a "Nueva Reserva"
# 3. El sistema validar√° autom√°ticamente:
#    - Disponibilidad de la cancha
#    - Horarios permitidos
#    - L√≠mite de reservas
#    - Duraci√≥n v√°lida

# ========================================
# CONFIGURACIONES AJUSTABLES
# ========================================

# En reservas/models.py puedes cambiar:
HORA_APERTURA = time(8, 0)  # Hora de apertura del complejo
HORA_CIERRE = time(23, 0)   # Hora de cierre
DURACION_MINIMA_RESERVA = 1  # Horas
DURACION_MAXIMA_RESERVA = 4  # Horas
MAX_RESERVAS_POR_CLIENTE_DIA = 3  # Reservas por d√≠a

# ========================================
# ¬°LISTO!
# ========================================
